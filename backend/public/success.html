<!doctype html>
<html>
  <head>
    <title>Lol</title>
  </head>

  <body>
    <h1>Success!</h1>
    <p>Thank you for your submission.</p>
    <pre id="order-info"></pre>

    <script>
      // get session_id from location href
      const session_id = new URLSearchParams(window.location.search).get('session_id');

      document.getElementById("order-info").textContent = session_id;

      // test key, NOT SECURE FOR PRODUCTION
      const YOUR_SECRET_KEY = "sk_test_51HELKrIWzZPN3tivysWwa5jFGWJCRedogkJTT7qJsULahXzx0B2LL2rtzFMZDV9M2k8hj7sGRw1E4iopHyLbG9EX00mv0r1Ocd";

      // make a request to stripe to get info about the session
      // Assuming you have already included Stripe's JavaScript library and initialized it with your publishable key
      fetch(`https://api.stripe.com/v1/checkout/sessions/${session_id}`, {
        headers: {
          'Authorization': `Bearer ${YOUR_SECRET_KEY}`, // replace with your Stripe secret key
          'Content-Type': 'application/x-www-form-urlencoded'
        }
      })
      .then(response => response.json())
      .then(data => {
        console.log(data); // You can handle the response here
      })
      .catch((error) => {
        console.error('Error:', error);
      });

    </script>
  </body>
</html>
